module.exports = project_card


const path = require('path')
const cwd = process.cwd()
const prefix = path.relative(cwd, __dirname)

const sm_icon_button = require('buttons/sm_icon_button')


// CSS Boiler Plat
const sheet = new CSSStyleSheet
const theme = get_theme()
sheet.replaceSync(theme)





function project_card (opts) {

    const {data} = opts
    // Assigning all the icons
    const { img_src: { 
        icon_consortium = `${prefix}/icon_consortium_page.png`,
    } } = data


    const el = document.createElement('div')
    el.style.lineHeight = '0px'
    const shadow = el.attachShadow( { mode : 'closed' } )
    
    const { socials, project_logo, desc, tags, project } = opts
    shadow.innerHTML = `
    <div class="project_card">
        <div class="icon_wrapper">
        <div class="project_title">${project}<img src="${project_logo}"></div>
        <div class="socials_wrapper"><socials></socials></div>
        </div>
        <div class="content_wrapper"><div class="desc"> ${desc}</div></div>
        <div class="tags_wrapper">
        ${tags.map(tag => `<div class="tag">${tag}</div>`).join('')}
        </div>
    </div>
    <style>${get_theme()}</style>
    `
    shadow.querySelector('socials').replaceWith(...socials.map(x => sm_icon_button({ src: x })))

    shadow.adoptedStyleSheets = [sheet]
    return el


}





function get_theme(){
    return`
        *{
            box-sizing: border-box;
        }
        .project_card{
            height:max-content;
            width:100%;
            line-height: normal;
            background-color: var(--bg_color);
            color: var(--primary_color) !important;
            border:1px solid var(--primary_color);
            container-type: inline-size;
            box-sizing: border-box;
        }
        .content_wrapper{
            padding:20px;
        }
        .icon_wrapper{
            display:flex;
            justify-content:space-between;
            border-bottom: 1px solid var(--primary_color);
        }
        .project_title{
            display:flex;
            gap:5px;
            font-size:16px;
            letter-spacing:-2px;
            align-items:center;
            font-weight: 700;
            margin-left:5px;
        }
        .socials_wrapper{
            display:flex;
        }
        .socials_wrapper a{
            display:flex;
            height:100%;
            align-items:center;
        }
        .desc{
            font-size:14px;
            letter-spacing:-2px;
            line-height:16px;
        }
        .tags_wrapper{
            display: flex;
            flex-wrap:wrap;
        }
        .tag{
            flex-grow:1;
            min-width:max-content;
            padding:5px 10px;
            border: 1px solid var(--primary_color);
            text-align:center;
        }
        




        @container(min-width: 856px) {
            
        }


    `
}